<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>AppOrbit v4 - Dashboard Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            overscroll-behavior: none;
            background-color: #000000;
            color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }

        .view-anim { animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .glass-header { background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        .legal-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 24px; padding: 20px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }

        /* Login Specific Styles */
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(20px); }
        .active-avatar { border: 3px solid #3b82f6; transform: scale(1.1); box-shadow: 0 0 15px rgba(59, 130, 246, 0.5); }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

        /* --- Game Specific Styles --- */
        .lose-bg { background: linear-gradient(to bottom, #450a0a, #000000); }
        .win-bg { background: linear-gradient(to bottom, #064e3b, #000000); }
        
        .m-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; perspective: 1000px; }
        .m-card { aspect-ratio: 1/1; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .m-card.flipped { transform: rotateY(180deg); }
        .m-front, .m-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 12px; font-size: 1.5rem; }
        .m-front { background: #0f172a; border: 1px solid rgba(255,255,255,0.1); color: #3b82f6; }
        .m-back { background: #3b82f6; color: white; transform: rotateY(180deg); }

        .tile-2048 { width: 100%; height: 100%; background: #1e293b; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.2rem; transition: all 0.1s; border: 1px solid rgba(255,255,255,0.05); }
        .tile-2 { background: #334155; color: #94a3b8; }
        .tile-8 { background: #3b82f6; color: white; box-shadow: 0 0 10px rgba(59,130,246,0.5); }
        
        .shake-wrong { animation: shake 0.4s ease-in-out; border: 2px solid #ef4444 !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        
        canvas { border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.8); touch-action: none; background: #020617; }

        /* Developer Special Tag */
        .dev-badge { background: linear-gradient(90deg, #3b82f6, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* --- Water Sort CSS --- */
        #water-stage { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .bottle { width: 45px; height: 160px; border: 2px solid rgba(255,255,255,0.2); border-radius: 8px 8px 20px 20px; background: rgba(255, 255, 255, 0.05); display: flex; flex-direction: column-reverse; cursor: pointer; position: relative; transition: 0.3s; overflow: hidden; }
        .bottle.selected { transform: translateY(-15px); border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.5); }
        .liquid { width: 100%; height: 25%; transition: height 0.4s; border-top: 1px solid rgba(255,255,255,0.1); }
        .w-hud { display: flex; justify-content: space-between; width: 100%; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 20px; margin-bottom: 20px; }
    </style>
</head>
<body class="select-none no-scrollbar min-h-screen">

    <div id="login-view" class="fixed inset-0 z-[2000] bg-black hidden flex-col items-center justify-center p-4 overflow-y-auto no-scrollbar">
        <div class="w-full max-w-md view-anim">
            <div class="glass p-8 rounded-[3rem] text-center">
                <div class="mb-6">
                    <div class="w-16 h-16 bg-gradient-to-tr from-blue-500 to-indigo-500 rounded-2xl mx-auto flex items-center justify-center text-2xl mb-4">
                        <i class="fas fa-rocket text-white"></i>
                    </div>
                    <h1 class="text-2xl font-black text-white">Swagat Hai!</h1>
                    <p class="text-slate-500 text-sm">Apna profile setup karein</p>
                </div>

                <div class="space-y-6">
                    <div class="text-left">
                        <label class="text-xs font-bold text-slate-400 uppercase ml-4 mb-2 block">Username</label>
                        <input id="login-user" type="text" placeholder="Apna naam likhein..." class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-blue-500 transition-all text-white">
                    </div>

                    <div class="text-left">
                        <label class="text-xs font-bold text-slate-400 uppercase ml-4 mb-2 block">Numerical PIN</label>
                        <input id="login-pin" type="number" pattern="[0-9]*" placeholder="4-digit PIN" class="w-full bg-white/5 border border-white/10 p-4 rounded-2xl outline-none focus:border-blue-500 transition-all text-center text-xl tracking-widest text-white">
                    </div>

                    <div class="text-left">
                        <label class="text-xs font-bold text-slate-400 uppercase ml-4 mb-3 block">Avatar Chunein</label>
                        <div id="avatar-grid" class="grid grid-cols-5 gap-3"></div>
                    </div>

                    <button onclick="handleLoginSubmit()" class="w-full bg-white text-black font-black p-4 rounded-2xl hover:bg-blue-600 hover:text-white transition-all">
                        Chalo Shuru Karein <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="splash" class="fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center transition-opacity duration-700 hidden">
        <div class="w-24 h-24 bg-blue-600 rounded-[2.5rem] flex items-center justify-center shadow-2xl animate-bounce">
            <i class="fas fa-rocket text-white text-3xl"></i>
        </div>
        <h1 class="text-3xl font-black mt-8 tracking-tighter text-white">AppOrbit Platinum</h1>
        <p class="text-[10px] text-blue-500 font-bold tracking-[0.4em] mt-2 uppercase">Your Ultimate Arcade Hub</p>
    </div>

    <div id="app-shell" class="hidden flex flex-col min-h-screen max-w-md mx-auto bg-black shadow-2xl relative overflow-hidden">
        
        <header class="sticky top-0 z-50 p-5 glass-header">
            <div class="flex justify-between items-center mb-5">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-tr from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-layer-group text-white text-xs"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-black tracking-tight text-white">AppOrbit</h1>
                        <p class="text-[8px] font-bold text-blue-500 uppercase tracking-widest">Version 3.1 Dashboard</p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-[8px] font-black text-slate-500 uppercase">Developed By</p>
                    <p class="text-[10px] font-black dev-badge uppercase">Siddiqui Kamal</p>
                </div>
            </div>
            <div class="relative">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                <input oninput="handleSearch(this.value)" type="text" placeholder="Search system database..." class="w-full bg-white/5 py-3.5 pl-11 pr-4 rounded-2xl text-sm outline-none border border-white/10 focus:border-blue-500/50 transition-all text-white">
            </div>
        </header>

        <main id="view-container" class="flex-1 overflow-y-auto p-5 pb-32 no-scrollbar"></main>

        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-black/95 backdrop-blur-xl border-t border-white/5 flex justify-around py-5 z-50 rounded-t-[30px]">
            <button onclick="showView('home')" id="nav-home" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-chart-pie text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Dash</span>
            </button>
            <button onclick="showView('games')" id="nav-games" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-gamepad text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Arcade</span>
            </button>
            <button onclick="showView('info')" id="nav-info" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-info-circle text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Info</span>
            </button>
        </nav>
    </div>

    <div id="result-overlay" class="fixed inset-0 z-[2000] hidden items-center justify-center p-6 backdrop-blur-xl">
        <div id="result-card" class="rounded-[3.5rem] p-10 text-center shadow-2xl max-w-xs w-full view-anim border border-white/10">
            <div id="result-icon-box" class="w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl">
                <i id="result-icon" class="fas text-4xl text-white"></i>
            </div>
            <h2 id="result-title" class="text-3xl font-black mb-2 text-white uppercase tracking-tight"></h2>
            <p id="result-msg" class="text-white/60 text-sm mb-10 font-medium"></p>
            <div class="space-y-3">
                <button id="res-btn-retry" class="w-full bg-white text-black font-black py-4 rounded-3xl shadow-xl active:scale-95 transition-all uppercase tracking-widest text-xs">Play Again</button>
                <button onclick="closeResult()" class="w-full bg-white/10 text-white font-bold py-4 rounded-3xl active:scale-95 transition-all text-xs uppercase">Main Menu</button>
            </div>
        </div>
    </div>

    <script>
        const avatars = ['ü¶Å', 'ü¶ä', 'üêº', 'ü§ñ', 'üëæ', 'üöÄ', 'üê±', 'ü¶Ñ', 'üêØ', 'üêß'];
        let selectedAvatarIdx = 0;
        let currentUser = null;

        const GAMES_DB = [
            /* --- Naya Game Add Kiya Gaya --- */
            { id: 'g_water', name: 'Water Sort Elite', cat: 'Puzzle', icon: 'https://cdn-icons-png.flaticon.com/512/3105/3105807.png', key: 'water' },
            /* --- Purane Saare Games --- */
            { id: 'g_mem', name: 'Memory Match Pro', cat: 'Brain', icon: 'https://cdn-icons-png.flaticon.com/512/3063/3063822.png', key: 'memory' },
            { id: 'g_2048', name: '2048 Platinum', cat: 'Logic', icon: 'https://cdn-icons-png.flaticon.com/512/3504/3504104.png', key: '2048' },
            { id: 'g_math', name: 'Math Speed Duel', cat: 'Brain', icon: 'https://cdn-icons-png.flaticon.com/512/2312/2312677.png', key: 'math' },
            { id: 'g_mole', name: 'Whack-A-Mole', cat: 'Reflex', icon: 'https://cdn-icons-png.flaticon.com/512/2619/2619077.png', key: 'mole' },
            { id: 'g_snake', name: 'Neon Snake High', cat: 'Arcade', icon: 'https://cdn-icons-png.flaticon.com/512/528/528105.png', key: 'snake' },
            { id: 'g_color', name: 'Color Reflex', cat: 'Mind', icon: 'https://cdn-icons-png.flaticon.com/512/3552/3552011.png', key: 'color' },
            { id: 'g_catch', name: 'Gems Catch Ultra', cat: 'Action', icon: 'https://cdn-icons-png.flaticon.com/512/658/658237.png', key: 'catch' },
            { id: 'g_ttt', name: 'Tic Tac Toe Duo', cat: 'Board', icon: 'https://cdn-icons-png.flaticon.com/512/566/566294.png', key: 'ttt' },
            { id: 'g_emoji', name: 'Emoji Pop Speed', cat: 'Reflex', icon: 'https://cdn-icons-png.flaticon.com/512/4272/4272841.png', key: 'emoji' },
            { id: 'g_tap', name: 'Fast Tap Speed', cat: 'Action', icon: 'https://cdn-icons-png.flaticon.com/512/2618/2618245.png', key: 'tap' },
            { id: 'g_space', name: 'Space Dodge Pro', cat: 'Arcade', icon: 'https://cdn-icons-png.flaticon.com/512/1356/1356479.png', key: 'space' },
            { id: 'g_simon', name: 'Simon Sequence', cat: 'Memory', icon: 'https://cdn-icons-png.flaticon.com/512/3399/3399127.png', key: 'simon' },
            { id: 'g_num', name: 'Number Slider', cat: 'Puzzle', icon: 'https://cdn-icons-png.flaticon.com/512/566/566445.png', key: 'number' }
        ];

        let scores = JSON.parse(localStorage.getItem('orbit_v3_scores')) || {};
        let isGameOn = false;
        let currentKey = '';

        window.onload = () => {
            initAvatarGrid();
            checkExistingSession();
        };

        function initAvatarGrid() {
            const grid = document.getElementById('avatar-grid');
            grid.innerHTML = '';
            avatars.forEach((av, i) => {
                const btn = document.createElement('div');
                btn.className = `aspect-square bg-white/5 rounded-xl flex items-center justify-center text-xl cursor-pointer transition-all ${i === 0 ? 'active-avatar' : ''}`;
                btn.innerHTML = av;
                btn.onclick = () => selectAvatar(i);
                btn.id = `av-${i}`;
                grid.appendChild(btn);
            });
        }

        function selectAvatar(idx) {
            document.querySelectorAll('#avatar-grid div').forEach(el => el.classList.remove('active-avatar'));
            document.getElementById(`av-${idx}`).classList.add('active-avatar');
            selectedAvatarIdx = idx;
        }

        function checkExistingSession() {
            const saved = localStorage.getItem('orbit_user_data');
            if(saved) {
                currentUser = JSON.parse(saved);
                launchApp(true);
            } else {
                document.getElementById('login-view').classList.remove('hidden');
                document.getElementById('login-view').classList.add('flex');
            }
        }

        function handleLoginSubmit() {
            const user = document.getElementById('login-user').value.trim();
            const pin = document.getElementById('login-pin').value.trim();
            if (!user || !pin) { alert("Username aur PIN zaroori hai!"); return; }
            currentUser = { name: user, pin: pin, avatar: avatars[selectedAvatarIdx] };
            localStorage.setItem('orbit_user_data', JSON.stringify(currentUser));
            document.getElementById('login-view').classList.add('hidden');
            document.getElementById('login-view').classList.remove('flex');
            launchApp(false);
        }

        function handleLogout() {
            localStorage.removeItem('orbit_user_data');
            currentUser = null;
            document.getElementById('app-shell').style.display = 'none';
            document.getElementById('login-view').classList.remove('hidden');
            document.getElementById('login-view').classList.add('flex');
        }

        function launchApp(isQuick) {
            const splash = document.getElementById('splash');
            splash.classList.remove('hidden');
            setTimeout(() => {
                splash.style.opacity = '0';
                setTimeout(() => {
                    splash.style.display = 'none';
                    document.getElementById('app-shell').style.display = 'flex';
                    showView('home');
                }, 700);
            }, isQuick ? 1000 : 2000);
        }

        function showView(view) {
            const container = document.getElementById('view-container');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('opacity-100', 'text-blue-500'));
            const activeNav = document.getElementById('nav-' + view);
            if(activeNav) activeNav.classList.add('opacity-100', 'text-blue-500');
            isGameOn = false;
            container.innerHTML = '';
            if (view === 'home') renderHome();
            else if (view === 'games') renderGames();
            else if (view === 'info') renderLegal();
        }

        function renderHome() {
            const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
            const gamesPlayed = Object.keys(scores).length;
            const seed = new Date().getDate(); 
            const randomGame = GAMES_DB[seed % GAMES_DB.length]; 

            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-6">
                    <div class="flex justify-between items-end">
                        <div class="space-y-1">
                            <p class="text-blue-500 text-[10px] font-black uppercase tracking-[0.3em]">Welcome Back</p>
                            <h2 class="text-3xl font-black text-white">${currentUser?.name} ${currentUser?.avatar}</h2>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-blue-600 to-cyan-500 flex items-center justify-center border-2 border-white/10 shadow-lg text-xl">
                            ${currentUser?.avatar}
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-white/5 p-4 rounded-[1.5rem] border border-white/5 flex flex-col items-center justify-center">
                            <i class="fas fa-trophy text-amber-500 text-sm mb-2"></i>
                            <p class="text-lg font-black text-white">${totalScore}</p>
                            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-wider">Points</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-[1.5rem] border border-white/5 flex flex-col items-center justify-center">
                            <i class="fas fa-gamepad text-emerald-500 text-sm mb-2"></i>
                            <p class="text-lg font-black text-white">${gamesPlayed}</p>
                            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-wider">Games</p>
                        </div>
                        <div class="bg-white/5 p-4 rounded-[1.5rem] border border-white/5 flex flex-col items-center justify-center">
                            <i class="fas fa-code text-blue-500 text-sm mb-2"></i>
                            <p class="text-[10px] font-black text-white">ACTIVE</p>
                            <p class="text-[8px] text-slate-500 uppercase font-bold tracking-wider">Status</p>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-indigo-900/40 to-black p-5 rounded-[2.5rem] border border-white/10 flex items-center gap-4">
                        <div class="w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center text-3xl">üë®‚Äçüíª</div>
                        <div>
                            <p class="text-[8px] font-black text-blue-400 uppercase tracking-widest">Main Developer</p>
                            <h3 class="text-lg font-black text-white">Siddiqui Kamal</h3>
                            <p class="text-[10px] text-slate-400">System Architect & Lead Designer</p>
                        </div>
                    </div>

                    <div class="relative overflow-hidden bg-gradient-to-r from-slate-900 to-black rounded-[2.5rem] border border-white/10 p-6 shadow-2xl">
                        <div class="relative z-10">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></span>
                                <p class="text-[10px] font-black text-rose-500 uppercase tracking-widest">Daily Quest</p>
                            </div>
                            <h3 class="text-xl font-black text-white mb-1">${randomGame.name}</h3>
                            <p class="text-xs text-slate-400 mb-4">Master this game to level up your dashboard.</p>
                            <button onclick="openLauncher('${randomGame.id}')" class="bg-white text-black text-[10px] font-black px-6 py-3 rounded-xl uppercase tracking-widest active:scale-95 transition-transform">Start Now</button>
                        </div>
                    </div>
                </div>`;
        }

        function renderGames() {
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-6">
                    <h2 class="text-2xl font-black text-white">Arcade Hub</h2>
                    <div class="grid grid-cols-2 gap-4">
                        ${GAMES_DB.map(app => `
                            <div onclick="openLauncher('${app.id}')" class="bg-white/5 p-5 rounded-[2.5rem] border border-white/5 text-center active:scale-95 transition-all">
                                <img src="${app.icon}" class="w-16 h-16 mx-auto mb-4 bg-black/40 p-2 rounded-2xl">
                                <h4 class="font-bold text-xs text-white truncate">${app.name}</h4>
                                <p class="text-[8px] text-blue-500 font-black mt-1 uppercase">${app.cat}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
        }

        function renderLegal() {
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-6 pb-10">
                    <h2 class="text-2xl font-black text-white">System Information</h2>
                    
                    <div class="legal-card bg-gradient-to-tr from-blue-600/10 to-transparent border-blue-500/20">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="w-16 h-16 rounded-3xl bg-blue-600 flex items-center justify-center text-3xl shadow-lg shadow-blue-600/30 text-white">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div>
                                <h3 class="font-black text-xl text-white">Siddiqui Kamal</h3>
                                <p class="text-xs text-blue-400 font-bold uppercase tracking-widest">Full-Stack Developer</p>
                            </div>
                        </div>
                        <p class="text-[11px] text-slate-400 leading-relaxed italic mb-4">"Building seamless digital experiences with passion and precision. AppOrbit is a reflection of modern performance and UI design."</p>
                        <div class="flex gap-2">
                            <span class="bg-white/5 px-3 py-1 rounded-full text-[9px] font-bold text-slate-300">JavaScript</span>
                            <span class="bg-white/5 px-3 py-1 rounded-full text-[9px] font-bold text-slate-300">UI/UX</span>
                            <span class="bg-white/5 px-3 py-1 rounded-full text-[9px] font-bold text-slate-300">Logic Design</span>
                        </div>
                    </div>

                    <div class="legal-card">
                        <div class="flex items-center gap-3 mb-3 text-rose-500">
                            <i class="fas fa-sign-out-alt"></i>
                            <h3 class="font-black text-xs uppercase tracking-widest">Account</h3>
                        </div>
                        <p class="text-[11px] text-slate-400 mb-4">Logged in as <b>${currentUser?.name}</b>.</p>
                        <button onclick="handleLogout()" class="w-full text-xs font-bold text-white bg-rose-600/20 px-4 py-3 rounded-xl border border-rose-500/30 block text-center uppercase tracking-widest">Logout</button>
                    </div>

                    <div class="legal-card">
                        <div class="flex items-center gap-3 mb-3 text-purple-500">
                            <i class="fas fa-shield-alt"></i>
                            <h3 class="font-black text-xs uppercase tracking-widest">Privacy</h3>
                        </div>
                        <p class="text-[11px] text-slate-400 leading-relaxed">System v3.1 is localized. No data leaves this device.</p>
                    </div>
                </div>`;
        }

        function handleSearch(q) {
            if(!q) return renderHome();
            const filtered = GAMES_DB.filter(g => g.name.toLowerCase().includes(q.toLowerCase()));
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-4">
                    <h2 class="text-xs font-black text-slate-500 uppercase tracking-widest">Results (${filtered.length})</h2>
                    <div class="grid grid-cols-1 gap-3">
                        ${filtered.map(app => `
                            <div onclick="openLauncher('${app.id}')" class="flex items-center gap-4 p-4 bg-white/5 rounded-[2rem] border border-white/5">
                                <img src="${app.icon}" class="w-10 h-10">
                                <h4 class="font-bold text-sm text-white">${app.name}</h4>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
        }

        function openLauncher(id) {
            const app = GAMES_DB.find(a => a.id === id);
            const container = document.getElementById('view-container');
            currentKey = app.key;
            container.innerHTML = `
                <div class="view-anim min-h-[70vh] flex flex-col items-center justify-center px-2">
                    <div class="bg-white/5 rounded-[3.5rem] p-10 text-center shadow-2xl border border-white/10 w-full relative">
                        <button onclick="showView('games')" class="absolute top-10 left-10 text-slate-500"><i class="fas fa-chevron-left text-xl"></i></button>
                        <img src="${app.icon}" class="w-28 h-28 mx-auto mb-10 bg-white/5 rounded-[2.5rem] p-4 shadow-xl border border-white/10">
                        <h2 class="text-3xl font-black text-white">${app.name}</h2>
                        <div class="flex gap-4 mt-12 mb-12">
                            <div class="flex-1 bg-black p-4 rounded-3xl border border-white/5">
                                <p class="text-[8px] font-black text-slate-500 uppercase">Best</p>
                                <p class="text-lg font-black text-white mt-1">${scores[app.key] || 0}</p>
                            </div>
                            <div class="flex-1 bg-black p-4 rounded-3xl border border-white/5">
                                <p class="text-[8px] font-black text-slate-500 uppercase">Status</p>
                                <p class="text-lg font-black text-blue-500 mt-1 uppercase">HQ</p>
                            </div>
                        </div>
                        <button onclick="startGame('${app.key}')" class="w-full bg-blue-600 text-white font-black py-5 rounded-3xl shadow-xl active:scale-95 transition-all tracking-[0.2em] text-xs uppercase">START MISSION</button>
                    </div>
                </div>`;
        }

        function startGame(key) {
            isGameOn = true;
            if(key === 'water') initWaterSort();
            else if(key === 'math') initMath();
            else if(key === 'memory') initMemory();
            else if(key === '2048') init2048();
            else if(key === 'mole') initMole();
            else if(key === 'snake') initSnake();
            else if(key === 'catch') initCatch();
            else if(key === 'emoji') initEmoji();
            else if(key === 'tap') initTap();
            else if(key === 'space') initSpace();
            else if(key === 'color') initColor();
            else if(key === 'ttt') initTTT();
            else if(key === 'simon') initSimon();
            else if(key === 'number') initNumberSlider();
        }

        function showResult(score, isWin, msg) {
            isGameOn = false;
            const overlay = document.getElementById('result-overlay');
            const card = document.getElementById('result-card');
            const iconBox = document.getElementById('result-icon-box');
            const icon = document.getElementById('result-icon');
            const title = document.getElementById('result-title');
            const message = document.getElementById('result-msg');
            const retryBtn = document.getElementById('res-btn-retry');

            overlay.classList.remove('hidden');
            overlay.classList.add('flex');

            if (isWin) {
                card.className = "rounded-[3.5rem] p-10 text-center shadow-2xl max-w-xs w-full view-anim border border-white/10 win-bg";
                iconBox.className = "w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl";
                icon.className = "fas fa-trophy text-4xl text-white";
                title.innerText = "Success!";
            } else {
                card.className = "rounded-[3.5rem] p-10 text-center shadow-2xl max-w-xs w-full view-anim border border-white/10 lose-bg";
                iconBox.className = "w-24 h-24 bg-rose-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl";
                icon.className = "fas fa-skull text-4xl text-white";
                title.innerText = "Failed";
            }

            message.innerText = msg + (score !== null ? ` \nScore: ${score}` : "");
            retryBtn.onclick = () => { closeResult(); startGame(currentKey); };

            if (score > (scores[currentKey] || 0)) {
                scores[currentKey] = score;
                localStorage.setItem('orbit_v3_scores', JSON.stringify(scores));
            }
        }

        function closeResult() {
            document.getElementById('result-overlay').classList.add('hidden');
            document.getElementById('result-overlay').classList.remove('flex');
            showView('games');
        }

        /* --- WATER SORT ENGINE --- */
        let wBottles = [], wSelected = null, wMoves = 0, wTime = 60;
        const W_COLORS = ['#ff4b2b', '#00d2ff', '#11998e', '#f9d423', '#8e2de2'];

        function initWaterSort() {
            wMoves = 0; wSelected = null; wTime = 60;
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim">
                    <div class="w-hud">
                        <div class="text-center"><p class="text-[8px] text-slate-500 uppercase font-black">Time</p><p id="w-timer" class="text-blue-500 font-black">60</p></div>
                        <div class="text-center"><p class="text-[8px] text-slate-500 uppercase font-black">Moves</p><p id="w-moves" class="text-white font-black">0</p></div>
                        <button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button>
                    </div>
                    <div id="water-stage"></div>
                </div>`;
            
            let pool = [];
            W_COLORS.forEach(c => { for(let i=0; i<4; i++) pool.push(c); });
            pool.sort(() => Math.random() - 0.5);
            wBottles = [];
            for(let i=0; i<5; i++) wBottles.push(pool.slice(i*4, (i+1)*4));
            wBottles.push([]); wBottles.push([]); // 2 Empty bottles

            renderWater();
            const timer = setInterval(() => {
                if(!isGameOn) { clearInterval(timer); return; }
                wTime--; document.getElementById('w-timer').innerText = wTime;
                if(wTime <= 0) { clearInterval(timer); showResult(wMoves, false, "Time Up!"); }
            }, 1000);
        }

        function renderWater() {
            const stage = document.getElementById('water-stage');
            stage.innerHTML = '';
            wBottles.forEach((b, i) => {
                const div = document.createElement('div');
                div.className = `bottle ${wSelected === i ? 'selected' : ''}`;
                div.onclick = () => handleWaterClick(i);
                b.forEach(color => {
                    const l = document.createElement('div');
                    l.className = 'liquid'; l.style.backgroundColor = color;
                    div.appendChild(l);
                });
                stage.appendChild(div);
            });
        }

        function handleWaterClick(i) {
            if(!isGameOn) return;
            if (wSelected === null) {
                if (wBottles[i].length > 0) { wSelected = i; renderWater(); }
            } else {
                if (wSelected !== i) {
                    const from = wBottles[wSelected];
                    const to = wBottles[i];
                    if (to.length < 4 && (to.length === 0 || to[to.length-1] === from[from.length-1])) {
                        const color = from[from.length-1];
                        while(from.length > 0 && from[from.length-1] === color && to.length < 4) {
                            to.push(from.pop());
                        }
                        wMoves++; document.getElementById('w-moves').innerText = wMoves;
                    }
                }
                wSelected = null; renderWater(); checkWaterWin();
            }
        }

        function checkWaterWin() {
            const win = wBottles.every(b => b.length === 0 || (b.length === 4 && b.every(c => c === b[0])));
            if (win) showResult(wMoves, true, "Sorted Successfully!");
        }

        /* --- REST OF THE ORIGINAL GAMES --- */
        function initMath() {
            let score = 0, lives = 3, q;
            const container = document.getElementById('view-container');
            const nextQ = () => {
                let a = Math.floor(Math.random()*15), b = Math.floor(Math.random()*15);
                let op = Math.random() > 0.5 ? '+' : '-';
                q = { txt: `${a} ${op} ${b}`, ans: op==='+'?a+b:a-b };
                document.getElementById('math-q').innerText = q.txt;
                let options = [q.ans, q.ans+2, q.ans-2, q.ans+1].sort(()=>Math.random()-0.5);
                document.getElementById('math-opts').innerHTML = options.map(o => `<button onclick="checkMath(${o}, this)" class="bg-white/10 p-5 rounded-2xl border border-white/5 font-black text-white active:scale-95 transition-all">${o}</button>`).join('');
            };
            container.innerHTML = `
                <div class="view-anim flex flex-col items-center">
                    <div class="w-full flex justify-between mb-10 bg-white/5 p-4 rounded-3xl border border-white/5">
                        <button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button>
                        <div class="flex gap-4">
                            <p class="text-rose-500 font-black" id="m-lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</p>
                            <p class="text-blue-500 font-black" id="m-score">0</p>
                        </div>
                    </div>
                    <div id="math-card" class="bg-white/5 w-full p-16 rounded-[3rem] text-center border border-white/10 mb-10 transition-all">
                        <h2 id="math-q" class="text-6xl font-black text-white"></h2>
                    </div>
                    <div id="math-opts" class="grid grid-cols-2 gap-4 w-full"></div>
                </div>`;
            nextQ();
            window.checkMath = (ans, btn) => {
                if(!isGameOn) return;
                if(ans === q.ans) { score += 10; document.getElementById('m-score').innerText = score; nextQ(); } 
                else { lives--; document.getElementById('m-lives').innerText = "‚ù§Ô∏è".repeat(lives) + "üñ§".repeat(3-lives); document.getElementById('math-card').classList.add('shake-wrong'); setTimeout(() => document.getElementById('math-card').classList.remove('shake-wrong'), 400); if(lives === 0) showResult(score, false, "Out of lives!"); else nextQ(); }
            };
        }

        function initMemory() {
            const icons = ['üéÆ','üöÄ','‚≠ê','üî•','üíé','üçé','‚ö°','üçï']; 
            let deck = [...icons, ...icons].sort(() => Math.random() - 0.5);
            let first = null, lock = false, mCount = 0, moves = 0;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim space-y-8"><div class="flex justify-between items-center bg-white/5 p-5 rounded-[2rem] border border-white/5 text-white"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times text-lg"></i></button><p class="text-xs font-black uppercase tracking-widest" id="m-moves">Moves: 0</p></div><div class="m-grid mx-auto">${deck.map((ic, i) => `<div class="m-card" data-ic="${ic}" id="mc-${i}" onclick="mFlip(${i})"><div class="m-front"><i class="fas fa-question opacity-10"></i></div><div class="m-back">${ic}</div></div>`).join('')}</div></div>`;
            window.mFlip = (i) => {
                if (lock || !isGameOn) return;
                const c = document.getElementById(`mc-${i}`);
                if (c.classList.contains('flipped')) return;
                c.classList.add('flipped');
                if (!first) { first = c; } else {
                    moves++; document.getElementById('m-moves').innerText = "Moves: " + moves; lock = true;
                    if (first.dataset.ic === c.dataset.ic) { mCount++; first = null; lock = false; if (mCount === icons.length) showResult(moves, true, "Memory cleared!"); } 
                    else { setTimeout(() => { first.classList.remove('flipped'); c.classList.remove('flipped'); first = null; lock = false; }, 800); }
                }
            };
        }

        function init2048() {
            let b2048 = Array(4).fill(0).map(()=>Array(4).fill(0)); let sc2048=0;
            const add = () => {
                let e=[]; for(let r=0;r<4;r++)for(let c=0;c<4;c++)if(b2048[r][c]===0)e.push({r,c});
                if(e.length){let{r,c}=e[Math.floor(Math.random()*e.length)];b2048[r][c]=Math.random()<0.9?2:4;}
            };
            const render = () => {
                const container = document.getElementById('view-container');
                container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8 p-4 bg-white/5 border border-white/5 rounded-3xl items-center"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-blue-500 font-black">SCORE: ${sc2048}</p></div><div id="g2048" class="grid grid-cols-4 gap-3 bg-white/5 p-3 rounded-2xl w-full max-w-[340px] aspect-square">${b2048.flat().map(v=>`<div class="tile-2048 ${v?'tile-'+v:''}"> ${v||''} </div>`).join('')}</div></div>`;
                let sx, sy; const g = document.getElementById('g2048');
                g.addEventListener('touchstart', e => { sx=e.touches[0].clientX; sy=e.touches[0].clientY; e.preventDefault(); }, {passive:false});
                g.addEventListener('touchend', e => {
                    let dx=e.changedTouches[0].clientX-sx, dy=e.changedTouches[0].clientY-sy;
                    let old = JSON.stringify(b2048);
                    const sl = (row) => {
                        let r = row.filter(v=>v);
                        for(let i=0;i<r.length-1;i++) if(r[i]===r[i+1]){r[i]*=2; sc2048+=r[i]; r.splice(i+1,1);}
                        return r.concat(Array(4-r.length).fill(0));
                    };
                    const t = (b) => b[0].map((_,i)=>b.map(r=>r[i]));
                    if(Math.abs(dx)>Math.abs(dy)){ if(dx>30) b2048 = b2048.map(r=>sl(r.reverse()).reverse()); else if(dx<-30) b2048 = b2048.map(r=>sl(r)); } 
                    else { if(dy>30) { b2048=t(b2048); b2048=b2048.map(r=>sl(r.reverse()).reverse()); b2048=t(b2048); } else if(dy<-30) { b2048=t(b2048); b2048=b2048.map(r=>sl(r)); b2048=t(b2048); } }
                    if(old !== JSON.stringify(b2048)) { add(); render(); }
                }, {passive:false});
            };
            add(); add(); render();
        }

        function initMole() {
            let score=0, hIdx=-1;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="m-sc">0</p></div><div class="grid grid-cols-3 gap-4 w-full max-w-[320px]">${[0,1,2,3,4,5,6,7,8].map(i=>`<div onclick="whack(${i})" class="aspect-square bg-white/5 rounded-3xl border border-white/10 flex items-center justify-center text-4xl overflow-hidden"><div id="mole-${i}" class="translate-y-20 transition-transform duration-200">üêπ</div></div>`).join('')}</div></div>`;
            const loop = setInterval(() => {
                if(!isGameOn) { clearInterval(loop); return; }
                document.querySelectorAll('[id^="mole-"]').forEach(m=>m.className="translate-y-20 transition-transform duration-200");
                hIdx = Math.floor(Math.random()*9);
                const isBomb = Math.random() > 0.8;
                const m = document.getElementById(`mole-${hIdx}`);
                m.innerText = isBomb ? 'üí£' : 'üêπ';
                m.className = "translate-y-0 transition-transform duration-200";
            }, 800);
            window.whack = (i) => {
                if(i !== hIdx || !isGameOn) return;
                const m = document.getElementById(`mole-${i}`);
                if(m.innerText === 'üí£') { clearInterval(loop); showResult(score, false, "Hit a bomb!"); }
                else { score+=10; document.getElementById('m-sc').innerText = score; m.className = "translate-y-20"; }
            };
        }

        function initSnake() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('games')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="s-sc">0</p></div><canvas id="sc" width="300" height="300" class="border border-white/10"></canvas><div class="mt-8 grid grid-cols-3 gap-3"><button onclick="sd('up')" class="col-start-2 w-14 h-14 bg-white/5 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-up"></i></button><button onclick="sd('left')" class="col-start-1 row-start-2 w-14 h-14 bg-white/5 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-left"></i></button><button onclick="sd('down')" class="col-start-2 row-start-2 w-14 h-14 bg-white/5 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-down"></i></button><button onclick="sd('right')" class="col-start-3 row-start-2 w-14 h-14 bg-white/5 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-right"></i></button></div></div>`;
            const ctx=document.getElementById('sc').getContext('2d');
            let s=[{x:10,y:10}], dx=1, dy=0, f={x:15,y:15}, sc=0;
            const l = setInterval(() => {
                if(!isGameOn) { clearInterval(l); return; }
                let h={x:s[0].x+dx, y:s[0].y+dy};
                if(h.x<0||h.x>=30||h.y<0||h.y>=30||s.some(seg=>seg.x===h.x&&seg.y===h.y)){ clearInterval(l); showResult(sc, false, "Crashed!"); return; }
                s.unshift(h);
                if(h.x===f.x && h.y===f.y){ sc+=10; document.getElementById('s-sc').innerText=sc; f={x:Math.floor(Math.random()*30), y:Math.floor(Math.random()*30)}; } else s.pop();
                ctx.clearRect(0,0,300,300); ctx.fillStyle="#3b82f6"; s.forEach(p=>ctx.fillRect(p.x*10,p.y*10,9,9)); ctx.fillStyle="#f43f5e"; ctx.fillRect(f.x*10,f.y*10,9,9);
            }, 100);
            window.sd = (d) => { if(d==='up'&&dy===0){dx=0;dy=-1}if(d==='down'&&dy===0){dx=0;dy=1}if(d==='left'&&dx===0){dx=-1;dy=0}if(d==='right'&&dx===0){dx=1;dy=0}};
        }

        function initCatch() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('games')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="c-sc">0</p></div><canvas id="cc" width="320" height="420" class="border border-white/10"></canvas></div>`;
            const cvs=document.getElementById('cc'), ctx=cvs.getContext('2d');
            let p={x:130,w:60}, its=[], sc=0;
            const loop = () => {
                if(!isGameOn) return;
                ctx.clearRect(0,0,320,420); if(Math.random()<0.04) its.push({x:Math.random()*300, y:0, t:Math.random()>0.2?'üíé':'üí£'});
                its.forEach((it,i)=>{
                    it.y+=4; ctx.font='24px serif'; ctx.fillText(it.t, it.x, it.y);
                    if(it.y>390 && it.x>p.x-10 && it.x<p.x+p.w+10){
                        if(it.t==='üí£'){ isGameOn=false; showResult(sc, false, "Bomb blast!"); return; }
                        sc+=10; document.getElementById('c-sc').innerText=sc; its.splice(i,1);
                    }
                    if(it.y>420) its.splice(i,1);
                });
                ctx.fillStyle='#3b82f6'; ctx.beginPath(); ctx.roundRect(p.x,400,p.w,10,5); ctx.fill();
                requestAnimationFrame(loop);
            };
            cvs.ontouchmove=(e)=>{p.x=e.touches[0].clientX-cvs.getBoundingClientRect().left-30; e.preventDefault();};
            loop();
        }

        function initEmoji() {
            let score=0, timeLeft=20;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><div class="flex gap-4"><p class="text-blue-500 font-black" id="e-timer">20s</p><p class="text-white font-black" id="e-sc">0</p></div></div><div class="relative w-full h-[400px] bg-white/5 border border-white/10 rounded-[2.5rem] overflow-hidden" id="e-area"></div></div>`;
            const area = document.getElementById('e-area');
            const spawn = () => {
                if(!isGameOn) return;
                const e = document.createElement('div');
                e.className = "absolute text-4xl cursor-pointer active:scale-125 transition-transform";
                e.style.left = Math.random()*80 + 10 + '%';
                e.style.top = Math.random()*80 + 10 + '%';
                e.innerText = ['üòÄ','üòÇ','üî•','‚≠ê','üíé'][Math.floor(Math.random()*5)];
                e.onclick = () => { score+=5; document.getElementById('e-sc').innerText = score; e.remove(); spawn(); };
                area.appendChild(e);
                setTimeout(() => { if(e.parentNode) e.remove(); spawn(); }, 1500);
            };
            spawn(); spawn();
            const timer = setInterval(() => {
                if(!isGameOn) { clearInterval(timer); return; }
                timeLeft--; document.getElementById('e-timer').innerText = timeLeft+'s';
                if(timeLeft<=0) { clearInterval(timer); showResult(score, true, "Time's up!"); }
            }, 1000);
        }

        function initTap() {
            let taps=0, timeLeft=10, started=false;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center justify-center min-h-[50vh]"><div class="text-center mb-10"><h2 class="text-6xl font-black text-white" id="t-count">0</h2><p class="text-blue-500 font-bold uppercase tracking-widest mt-2" id="t-timer">10s</p></div><button id="tap-btn" class="w-48 h-48 bg-blue-600 rounded-full shadow-2xl border-8 border-white/20 flex items-center justify-center active:scale-90 transition-all text-white font-black text-2xl uppercase tracking-widest">TAP!</button></div>`;
            const btn = document.getElementById('tap-btn');
            btn.onclick = () => {
                if(!isGameOn) return;
                if(!started) {
                    started=true;
                    const timer = setInterval(() => {
                        timeLeft--; document.getElementById('t-timer').innerText = timeLeft+'s';
                        if(timeLeft<=0) { clearInterval(timer); isGameOn=false; showResult(taps, true, "Fingers of fury!"); }
                    }, 1000);
                }
                taps++; document.getElementById('t-count').innerText = taps;
            };
        }

        function initSpace() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('games')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="sp-sc">0</p></div><canvas id="spc" width="320" height="480"></canvas></div>`;
            const cvs=document.getElementById('spc'), ctx=cvs.getContext('2d');
            let ship={x:150, y:400, w:20, h:30}, obs=[], sc=0;
            const loop = () => {
                if(!isGameOn) return;
                ctx.clearRect(0,0,320,480);
                if(Math.random()<0.05) obs.push({x:Math.random()*300, y:-20, w:30, h:30});
                obs.forEach((o,i)=>{
                    o.y += 5; ctx.fillStyle = "#ff4444"; ctx.fillRect(o.x, o.y, o.w, o.h);
                    if(o.y > 480) { obs.splice(i,1); sc+=1; document.getElementById('sp-sc').innerText = sc; }
                    if(ship.x < o.x+o.w && ship.x+ship.w > o.x && ship.y < o.y+o.h && ship.y+ship.h > o.y) { isGameOn=false; showResult(sc, false, "Collision!"); }
                });
                ctx.fillStyle = "#3b82f6"; ctx.fillRect(ship.x, ship.y, ship.w, ship.h);
                requestAnimationFrame(loop);
            };
            cvs.ontouchmove = (e) => { ship.x = e.touches[0].clientX - cvs.getBoundingClientRect().left - 10; e.preventDefault(); };
            loop();
        }

        function initColor() {
            let sc=0, time=20, cur;
            const colors = [{n:'RED',v:'#ef4444'}, {n:'BLUE',v:'#3b82f6'}, {n:'GREEN',v:'#22c55e'}, {n:'YELLOW',v:'#eab308'}];
            const next = () => {
                let n=colors[Math.floor(Math.random()*4)], v=colors[Math.floor(Math.random()*4)];
                cur = { n:n.n, v:v.v };
                const d = document.getElementById('cd'); d.innerText = cur.n; d.style.color = cur.v;
            };
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-blue-500 font-black" id="ct">20s</p></div><div class="bg-white/5 w-full py-20 rounded-[3rem] text-center border border-white/10 mb-10"><h2 id="cd" class="text-5xl font-black"></h2></div><div class="grid grid-cols-2 gap-4 w-full">${colors.map(c=>`<button onclick="checkC('${c.n}')" class="p-6 rounded-2xl font-black text-white active:scale-95" style="background:${c.v}">${c.n}</button>`).join('')}</div></div>`;
            next();
            const it = setInterval(() => {
                if(!isGameOn) { clearInterval(it); return; }
                time--; document.getElementById('ct').innerText = time+'s';
                if(time<=0) { clearInterval(it); showResult(sc, true, "Well done!"); }
            }, 1000);
            window.checkC = (n) => { if(n===cur.n) { sc+=10; next(); } else { time-=2; next(); } };
        }

        function initTTT() {
            let b=Array(9).fill(null), t='X', container=document.getElementById('view-container');
            container.innerHTML=`<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p id="ts" class="font-black text-white text-xs uppercase tracking-widest">Turn: ${t}</p></div><div class="grid grid-cols-3 gap-4 w-full max-w-[320px]">${[0,1,2,3,4,5,6,7,8].map(i=>`<div onclick="tC(${i},this)" class="bg-white/5 aspect-square rounded-[2rem] border border-white/10 flex items-center justify-center text-4xl font-black text-white active:bg-white/10"></div>`).join('')}</div></div>`;
            window.tC=(i,el)=>{
                if(b[i] || !isGameOn) return; b[i]=t; el.innerText=t; el.style.color=t==='X'?'#3b82f6':'#f43f5e';
                let wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
                if(wins.some(([a,bc,c])=>b[a]&&b[a]===b[bc]&&b[a]===b[c])) { isGameOn=false; showResult(null, true, t+" Wins!"); return; }
                if(b.every(v=>v)) { isGameOn=false; showResult(null, false, "Draw!"); return; }
                t=t==='X'?'O':'X'; document.getElementById('ts').innerText = `Turn: ${t}`;
            };
        }

        function initSimon() {
            let seq=[], userSeq=[], score=0;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="si-sc">0</p></div><div class="grid grid-cols-2 gap-4 w-full max-w-[320px]">${[0,1,2,3].map(i=>`<div id="s-${i}" onclick="siClick(${i})" class="aspect-square rounded-[2rem] border-4 border-white/5 transition-all opacity-50" style="background:${['#ef4444','#3b82f6','#22c55e','#eab308'][i]}"></div>`).join('')}</div></div>`;
            const playSeq = () => {
                let i=0; const it = setInterval(() => {
                    const b = document.getElementById(`s-${seq[i]}`);
                    b.classList.remove('opacity-50'); setTimeout(()=>b.classList.add('opacity-50'), 400);
                    i++; if(i>=seq.length) { clearInterval(it); }
                }, 600);
            };
            const nextLevel = () => { seq.push(Math.floor(Math.random()*4)); userSeq=[]; playSeq(); };
            window.siClick = (i) => {
                if(!isGameOn) return;
                const b = document.getElementById(`s-${i}`);
                b.classList.remove('opacity-50'); setTimeout(()=>b.classList.add('opacity-50'), 200);
                userSeq.push(i);
                if(userSeq[userSeq.length-1] !== seq[userSeq.length-1]) { isGameOn=false; showResult(score, false, "Wrong sequence!"); return; }
                if(userSeq.length === seq.length) { score++; document.getElementById('si-sc').innerText = score; setTimeout(nextLevel, 1000); }
            };
            nextLevel();
        }

        function initNumberSlider() {
            let n = [1,2,3,4,5,6,7,8,null].sort(()=>Math.random()-0.5);
            const render = () => {
                const container = document.getElementById('view-container');
                container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('games')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-xs font-black text-slate-500 uppercase">Sort 1-8</p></div><div class="grid grid-cols-3 gap-4 w-full max-w-[320px]">${n.map((v,i)=>`<div onclick="nsMove(${i})" class="aspect-square bg-white/5 rounded-[2rem] border border-white/10 flex items-center justify-center text-3xl font-black text-white ${!v?'opacity-0':''} active:scale-95 transition-all">${v||''}</div>`).join('')}</div></div>`;
            };
            window.nsMove = (i) => {
                let empty = n.indexOf(null);
                let valid = [i-1, i+1, i-3, i+3].includes(empty);
                if(valid) { n[empty]=n[i]; n[i]=null; render(); if(JSON.stringify(n)==='[1,2,3,4,5,6,7,8,null]') showResult(null, true, "Solved!"); }
            };
            render();
        }
    </script>

<!-- ============================= -->
<!-- üîä AppOrbit v3.2 SOUND FIXED -->
<!-- Built-in Sound + Haptic -->
<!-- ============================= -->

<style>
button{
transition:.3s;
}
button:hover{
box-shadow:0 0 20px #00bfff;
transform:scale(1.05);
}

/* Particles */
.real-particle{
position:fixed;
width:5px;
height:5px;
background:#00bfff;
border-radius:50%;
opacity:.6;
animation:floatUp linear infinite;
z-index:-2;
}
@keyframes floatUp{
0%{transform:translateY(100vh);opacity:0}
50%{opacity:1}
100%{transform:translateY(-10vh);opacity:0}
}
</style>

<script>
/* ===== Built-in Sound System (No MP3 Needed) ===== */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playBeep(freq, duration){
  const oscillator = audioCtx.createOscillator();
  const gainNode = audioCtx.createGain();

  oscillator.type = "sine";
  oscillator.frequency.value = freq;

  oscillator.connect(gainNode);
  gainNode.connect(audioCtx.destination);

  oscillator.start();

  gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
  gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);

  oscillator.stop(audioCtx.currentTime + duration);
}

/* Click Sound */
function clickSound(){
  playBeep(500, 0.1);
  if(navigator.vibrate) navigator.vibrate(20);
}

/* Win Sound */
window.appWin = function(){
  playBeep(800,0.15);
  setTimeout(()=>playBeep(1000,0.2),150);
  if(navigator.vibrate) navigator.vibrate([120,50,120]);
  showToast("üéâ You Won!");
}

/* Lose Sound */
window.appLose = function(){
  playBeep(200,0.3);
  if(navigator.vibrate) navigator.vibrate(300);
  showToast("üòî Game Over!");
}

/* Global Click */
document.addEventListener("click",function(e){
  if(e.target.closest("button")){
    clickSound();
  }
});

/* Toast */
function showToast(msg){
  let toast=document.createElement("div");
  toast.innerText=msg;
  toast.style.cssText="position:fixed;bottom:25px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:10px 20px;border-radius:10px;box-shadow:0 0 15px #00bfff;z-index:9999;";
  document.body.appendChild(toast);
  setTimeout(()=>toast.remove(),2000);
}

/* Particles */
for(let i=0;i<40;i++){
  const p=document.createElement("div");
  p.className="real-particle";
  p.style.left=Math.random()*100+"%";
  p.style.animationDuration=(5+Math.random()*8)+"s";
  document.body.appendChild(p);
}
</script>

<!-- ============================= -->
<!-- END SOUND FIXED VERSION -->
<!-- ============================= -->


<!-- ============================= -->
<!-- üåÜ CYBERPUNK / SYNTHWAVE BACKGROUND -->
<!-- ============================= -->
<style>
body{
  background: radial-gradient(circle at 50% 80%, #ff00cc 0%, #1a0026 40%, #000000 80%);
  overflow-x:hidden;
}

/* Neon Grid Floor */
.cyber-grid{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:50%;
  background:
    linear-gradient(to right, rgba(0,255,255,.3) 1px, transparent 1px),
    linear-gradient(to top, rgba(0,255,255,.3) 1px, transparent 1px);
  background-size:40px 40px;
  transform:perspective(500px) rotateX(60deg);
  transform-origin:bottom;
  animation:gridMove 6s linear infinite;
  z-index:-1;
}

@keyframes gridMove{
  from{background-position:0 0, 0 0;}
  to{background-position:0 40px, 40px 0;}
}

/* Neon Glow Pulse */
body::before{
  content:'';
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center, rgba(0,255,255,.2), transparent 70%);
  animation:neonPulse 4s infinite;
  z-index:-2;
}

@keyframes neonPulse{
  0%,100%{opacity:.4}
  50%{opacity:1}
}
</style>

<div class="cyber-grid"></div>
<!-- ============================= -->
<!-- END CYBERPUNK BACKGROUND -->
<!-- ============================= -->


<!-- ============================= -->
<!-- üéµ REAL SYNTHWAVE BACKGROUND MUSIC -->
<!-- ============================= -->
<script>
let bgStarted = false;
const AudioContextClass = window.AudioContext || window.webkitAudioContext;
const bgCtx = new AudioContextClass();

function startSynthwaveBG(){
  if(bgStarted) return;
  bgStarted = true;

  const masterGain = bgCtx.createGain();
  masterGain.gain.value = 0.05;
  masterGain.connect(bgCtx.destination);

  function createPad(freq){
    const osc = bgCtx.createOscillator();
    const gain = bgCtx.createGain();
    osc.type = "sawtooth";
    osc.frequency.value = freq;

    gain.gain.value = 0.2;

    osc.connect(gain);
    gain.connect(masterGain);

    osc.start();
  }

  // Chill Synthwave chord loop
  createPad(110);  // A2
  createPad(220);  // A3
  createPad(277);  // C#
  createPad(330);  // E

  console.log("Synthwave Background Started");
}

// Start on first user interaction (browser policy)
document.addEventListener("click", function(){
  if(bgCtx.state === "suspended"){
    bgCtx.resume();
  }
  startSynthwaveBG();
});
</script>
<!-- ============================= -->
<!-- END SYNTHWAVE MUSIC -->
<!-- ============================= -->


<!-- ============================= -->
<!-- üé∂ ULTRA DYNAMIC SYNTHWAVE MUSIC -->
<!-- ============================= -->
<script>
let ultraStarted = false;
const UltraAudioContext = window.AudioContext || window.webkitAudioContext;
const ultraCtx = new UltraAudioContext();

function playNote(freq, time, duration, type="sawtooth"){
  const osc = ultraCtx.createOscillator();
  const gain = ultraCtx.createGain();
  
  osc.type = type;
  osc.frequency.value = freq;

  gain.gain.setValueAtTime(0.001, time);
  gain.gain.exponentialRampToValueAtTime(0.08, time + 0.05);
  gain.gain.exponentialRampToValueAtTime(0.001, time + duration);

  osc.connect(gain);
  gain.connect(ultraCtx.destination);

  osc.start(time);
  osc.stop(time + duration);
}

function startUltraMusic(){
  if(ultraStarted) return;
  ultraStarted = true;

  const tempo = 90;
  const beat = 60 / tempo;
  let currentTime = ultraCtx.currentTime;

  const bassLine = [110, 110, 130, 98];
  const melody = [440, 494, 523, 494, 659, 587, 523, 494];

  setInterval(()=>{
    if(ultraCtx.state === "suspended"){
      ultraCtx.resume();
    }

    let t = ultraCtx.currentTime;

    // Bass
    bassLine.forEach((freq, i)=>{
      playNote(freq, t + i*beat, beat*0.9, "square");
    });

    // Melody (random variation)
    melody.forEach((freq, i)=>{
      let variation = Math.random() * 20 - 10;
      playNote(freq + variation, t + i*(beat/2), beat*0.4, "sawtooth");
    });

  }, beat * 4000);
}

// Start on first interaction
document.addEventListener("click", function(){
  startUltraMusic();
});

</script>
<!-- ============================= -->
<!-- END ULTRA MUSIC -->
<!-- ============================= -->

</body>
</html>
