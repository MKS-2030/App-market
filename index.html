<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#020617">
    <title>AppOrbit Platinum - Mega Hub</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        :root {
            --blue-accent: #3b82f6;
            --bg-dark: #020617;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
            background-color: #020617;
            color: #f8fafc;
        }

        /* View Animations */
        .view-anim { animation: viewSlideIn 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); }
        @keyframes viewSlideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Premium 3D Memory Cards */
        .m-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; perspective: 1000px; width: 100%; max-width: 340px; }
        .m-card { aspect-ratio: 1/1; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
        .m-card.flipped { transform: rotateY(180deg); }
        .m-front, .m-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 12px; font-size: 1.5rem; }
        .m-front { background: #0f172a; border: 1px solid rgba(255,255,255,0.1); color: #3b82f6; }
        .m-back { background: #3b82f6; color: white; transform: rotateY(180deg); }

        /* 2048 Matrix */
        .grid-2048 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; background: #1e293b; padding: 10px; border-radius: 16px; width: 100%; max-width: 320px; aspect-ratio: 1/1; }
        .tile-2048 { width: 100%; height: 100%; background: rgba(255,255,255,0.05); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.2rem; transition: all 0.1s; }
        .tile-2 { background: #334155; color: #94a3b8; }
        .tile-4 { background: #475569; color: #cbd5e1; }
        .tile-8 { background: #3b82f6; color: white; box-shadow: 0 0 10px rgba(59,130,246,0.5); }
        .tile-16 { background: #2563eb; color: white; }
        .tile-32 { background: #8b5cf6; color: white; }
        .tile-64 { background: #d946ef; color: white; }
        .tile-128 { background: #f43f5e; color: white; }

        /* Mole Game */
        .mole-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width: 100%; max-width: 320px; }
        .hole { aspect-ratio: 1/1; background: #1e293b; border-radius: 24px; position: relative; overflow: hidden; border: 4px solid #0f172a; }
        .mole { position: absolute; bottom: -100%; left: 0; width: 100%; height: 100%; display: flex; items: center; justify-content: center; font-size: 2.5rem; transition: bottom 0.2s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
        .mole.up { bottom: 0; }

        /* Custom UI */
        .glass-header { background: rgba(2, 6, 23, 0.85); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        canvas { border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); touch-action: none; background: #020617; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="dark:bg-slate-950 select-none">

    <!-- SPLASH -->
    <div id="splash" class="fixed inset-0 z-[1000] bg-[#020617] flex flex-col items-center justify-center transition-opacity duration-700">
        <div class="w-24 h-24 bg-blue-600 rounded-[2.5rem] flex items-center justify-center shadow-2xl animate-pulse">
            <i class="fas fa-play text-white text-3xl"></i>
        </div>
        <h1 class="text-3xl font-black mt-8 tracking-tighter text-white">AppOrbit</h1>
        <p class="text-[10px] text-blue-500 font-bold tracking-[0.4em] mt-2 uppercase">Platinum Mega Hub</p>
    </div>

    <!-- WIN DIALOG -->
    <div id="win-overlay" class="fixed inset-0 bg-slate-950/90 z-[2000] hidden items-center justify-center p-6 backdrop-blur-xl">
        <div class="bg-slate-900 rounded-[3rem] p-10 text-center shadow-2xl max-w-xs w-full view-anim border border-slate-800">
            <div class="w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-6 shadow-xl">
                <i class="fas fa-trophy text-4xl text-white"></i>
            </div>
            <h2 class="text-3xl font-black mb-2 text-white">Victory!</h2>
            <p id="win-msg" class="text-slate-400 text-sm mb-8"></p>
            <div class="space-y-3">
                <button id="win-restart-btn" class="w-full bg-blue-600 text-white font-black py-4 rounded-2xl shadow-xl active:scale-95 transition-all">REPLAY MISSION</button>
                <button onclick="closeWin()" class="w-full bg-slate-800 text-slate-400 font-bold py-4 rounded-2xl">BACK TO HUB</button>
            </div>
        </div>
    </div>

    <!-- APP SHELL -->
    <div id="app-shell" class="hidden flex flex-col min-h-screen max-w-md mx-auto bg-slate-950 shadow-2xl relative overflow-hidden">
        
        <header id="main-header" class="sticky top-0 z-50 p-5 glass-header">
            <div class="flex justify-between items-center mb-5">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg rotate-3">
                        <i class="fas fa-bolt text-white text-xs"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-black tracking-tight">AppOrbit</h1>
                        <p class="text-[8px] font-bold text-blue-500 uppercase tracking-widest">Mega Edition</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <div class="w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-blue-400 border border-slate-800">
                        <i class="fas fa-crown text-[10px]"></i>
                    </div>
                </div>
            </div>
            <div class="relative">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-sm"></i>
                <input oninput="handleSearch(this.value)" type="text" placeholder="Khojiye behtareen games..." class="w-full bg-slate-900/50 py-3.5 pl-11 pr-4 rounded-2xl text-sm outline-none border border-slate-800 focus:border-blue-500/30 transition-all text-white">
            </div>
        </header>

        <main id="view-container" class="flex-1 overflow-y-auto p-5 pb-32 no-scrollbar">
            <!-- Content -->
        </main>

        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-[#020617]/95 backdrop-blur-xl border-t border-slate-900 flex justify-around py-5 z-50 rounded-t-[40px] shadow-2xl">
            <button onclick="showView('home')" id="nav-home" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-compass text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Explore</span>
            </button>
            <button onclick="showView('games')" id="nav-games" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-gamepad text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Arcade</span>
            </button>
            <button onclick="showView('profile')" id="nav-profile" class="nav-item flex flex-col items-center gap-1 opacity-40 transition-all">
                <i class="fas fa-user-ninja text-xl"></i>
                <span class="text-[9px] font-bold uppercase tracking-widest">Profile</span>
            </button>
        </nav>
    </div>

    <script>
        // --- GAME DATABASE ---
        const GAMES_DB = [
            { id: 'g_mem', name: 'Memory Match Pro', dev: 'BrainOrbit', cat: 'Brain', icon: 'https://cdn-icons-png.flaticon.com/512/3063/3063822.png', key: 'memory', size: '1.8 MB' },
            { id: 'g_2048', name: '2048 Platinum', dev: 'LogicOrbit', cat: 'Logic', icon: 'https://cdn-icons-png.flaticon.com/512/3504/3504104.png', key: '2048', size: '1.2 MB' },
            { id: 'g_math', name: 'Math Duel Speed', dev: 'BrainOrbit', cat: 'Brain', icon: 'https://cdn-icons-png.flaticon.com/512/2312/2312677.png', key: 'math', size: '0.8 MB' },
            { id: 'g_mole', name: 'Whack-A-Mole Pro', dev: 'ActionOrbit', cat: 'Action', icon: 'https://cdn-icons-png.flaticon.com/512/2619/2619077.png', key: 'mole', size: '1.0 MB' },
            { id: 'g_snake', name: 'Neon Snake High', dev: 'RetroOrbit', cat: 'Arcade', icon: 'https://cdn-icons-png.flaticon.com/512/528/528105.png', key: 'snake', size: '1.4 MB' },
            { id: 'g_color', name: 'Color Reflex', dev: 'BrainOrbit', cat: 'Mind', icon: 'https://cdn-icons-png.flaticon.com/512/3552/3552011.png', key: 'color', size: '0.7 MB' },
            { id: 'g_catch', name: 'Gems Catch Ultra', dev: 'ActionOrbit', cat: 'Action', icon: 'https://cdn-icons-png.flaticon.com/512/658/658237.png', key: 'catch', size: '1.1 MB' },
            { id: 'g_ttt', name: 'Tic Tac Toe Duo', dev: 'Orbit Local', cat: 'Board', icon: 'https://cdn-icons-png.flaticon.com/512/566/566294.png', key: 'ttt', size: '0.5 MB' }
        ];

        let highScores = JSON.parse(localStorage.getItem('orbit_mega_scores')) || { memory:0, '2048':0, math:0, mole:0, snake:0, catch:0, color:0 };
        let feedbacks = JSON.parse(localStorage.getItem('orbit_mega_feedback')) || [];
        let isGameActive = false;
        let activeKey = '';

        window.onload = () => {
            setTimeout(() => {
                document.getElementById('splash').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splash').style.display = 'none';
                    document.getElementById('app-shell').style.display = 'flex';
                    showView('home');
                }, 700);
            }, 2500);
        };

        function showView(view) {
            const container = document.getElementById('view-container');
            const header = document.getElementById('main-header');
            isGameActive = false;
            
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('opacity-100', 'text-blue-500'));
            const activeNav = document.getElementById('nav-' + (['home','games','profile'].includes(view) ? view : ''));
            if(activeNav) activeNav.classList.add('opacity-100', 'text-blue-500');

            header.style.display = (['play','launcher','feedback'].includes(view)) ? 'none' : 'block';
            container.innerHTML = '';

            if (view === 'home') renderHome();
            else if (view === 'games') renderGames();
            else if (view === 'profile') renderProfile();
            else if (view === 'feedback') renderFeedback();
        }

        function renderHome(list = GAMES_DB) {
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-8">
                    <!-- Premium Hero -->
                    <div onclick="openLauncher('g_mem')" class="h-52 bg-gradient-to-br from-blue-600 to-indigo-900 rounded-[3rem] p-8 text-white relative overflow-hidden shadow-2xl cursor-pointer group">
                        <div class="z-10 relative">
                            <span class="bg-white/10 px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest border border-white/20">Featured Training</span>
                            <h2 class="text-3xl font-black mt-4 leading-none">Memory Match<br>Pro</h2>
                            <button class="mt-6 bg-white text-blue-600 text-[10px] font-black px-8 py-3 rounded-2xl shadow-xl">LAUNCH SESSION</button>
                        </div>
                        <i class="fas fa-brain absolute -right-8 -bottom-8 text-white/10 text-[200px] rotate-12 group-hover:scale-110 transition-transform duration-700"></i>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-6 px-2">
                            <h3 class="text-xs font-black text-slate-500 uppercase tracking-widest">Premium Arcade</h3>
                            <button class="text-blue-500 text-[10px] font-black uppercase">Refresh Hub</button>
                        </div>
                        <div class="space-y-4">
                            ${list.map(app => `
                                <div onclick="openLauncher('${app.id}')" class="flex items-center gap-5 p-4 bg-slate-900 rounded-[2.5rem] shadow-sm active:scale-95 transition-all border border-slate-800">
                                    <img src="${app.icon}" class="w-14 h-14 rounded-2xl shadow-md border border-slate-700">
                                    <div class="flex-1">
                                        <h4 class="font-bold text-sm text-white">${app.name}</h4>
                                        <p class="text-[10px] font-bold text-slate-500 mt-0.5 uppercase tracking-tighter">${app.cat} ‚Ä¢ ${app.size}</p>
                                    </div>
                                    <button class="bg-blue-600 text-white text-[10px] font-black px-5 py-2.5 rounded-full shadow-lg">PLAY</button>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>`;
        }

        function openLauncher(id) {
            const app = GAMES_DB.find(a => a.id === id);
            const container = document.getElementById('view-container');
            const score = highScores[app.key] || 0;
            activeKey = app.key;

            container.innerHTML = `
                <div class="view-anim min-h-[85vh] flex flex-col items-center justify-center px-5">
                    <div class="bg-slate-900 rounded-[3.5rem] p-10 text-center shadow-2xl border border-slate-800 w-full relative">
                        <button onclick="showView('home')" class="absolute top-10 left-10 text-slate-500"><i class="fas fa-chevron-left text-xl"></i></button>
                        <div class="w-28 h-28 mx-auto mb-10 bg-white/5 rounded-[2.5rem] p-4 shadow-xl border border-white/10">
                            <img src="${app.icon}" class="w-full h-full object-contain">
                        </div>
                        <h2 class="text-3xl font-black text-white">${app.name}</h2>
                        <p class="text-blue-500 text-[10px] font-black uppercase tracking-[0.4em] mt-3">Platinum Experience</p>
                        
                        <div class="flex gap-4 mt-12 mb-12">
                            <div class="flex-1 bg-slate-950 p-4 rounded-3xl border border-slate-800">
                                <p class="text-[8px] font-black text-slate-500 uppercase">Best Record</p>
                                <p class="text-lg font-black text-white mt-1">${score}</p>
                            </div>
                            <div class="flex-1 bg-slate-950 p-4 rounded-3xl border border-slate-800">
                                <p class="text-[8px] font-black text-slate-500 uppercase">System</p>
                                <p class="text-lg font-black text-blue-500 mt-1 uppercase">Ready</p>
                            </div>
                        </div>

                        <button onclick="startGame('${app.key}')" class="w-full bg-blue-600 text-white font-black py-5 rounded-3xl shadow-xl active:scale-95 transition-all tracking-[0.2em] text-sm uppercase">
                            LAUNCH MISSION
                        </button>
                    </div>
                </div>`;
        }

        function startGame(key) {
            isGameActive = true;
            if(key === 'memory') initMemory();
            else if(key === '2048') init2048();
            else if(key === 'math') initMath();
            else if(key === 'mole') initMole();
            else if(key === 'snake') initSnake();
            else if(key === 'catch') initCatch();
            else if(key === 'color') initColor();
            else if(key === 'ttt') initTTT();
        }

        // --- GAME 1: 3D MEMORY MATCH ---
        function initMemory() {
            const icons = ['üéÆ','üöÄ','‚≠ê','üî•','üíé','üçé','‚ö°','üçï']; 
            let deck = [...icons, ...icons].sort(() => Math.random() - 0.5);
            let first = null, lock = false, matches = 0, moves = 0;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim space-y-8"><div class="flex justify-between items-center bg-slate-900 p-4 rounded-[2rem] border border-slate-800"><button onclick="showView('home')" class="text-slate-500 px-3"><i class="fas fa-times text-lg"></i></button><div class="flex gap-6"><div class="text-center"><p class="text-[8px] font-black text-slate-500 uppercase">Moves</p><p id="m-moves" class="text-sm font-black text-blue-500">0</p></div></div></div><div class="m-grid mx-auto">${deck.map((ic, i) => `<div class="m-card" data-ic="${ic}" id="mc-${i}" onclick="mFlip(${i})"><div class="m-front"><i class="fas fa-question text-blue-500 opacity-20"></i></div><div class="m-back">${ic}</div></div>`).join('')}</div></div>`;

            window.mFlip = (idx) => {
                if (lock || !isGameActive) return;
                const card = document.getElementById(`mc-${idx}`);
                if (card.classList.contains('flipped')) return;
                card.classList.add('flipped');
                if (!first) { first = card; } else {
                    moves++; document.getElementById('m-moves').innerText = moves;
                    lock = true;
                    if (first.dataset.ic === card.dataset.ic) {
                        matches++; first = null; lock = false;
                        if (matches === icons.length) victory(moves, "Pairs matched!");
                    } else {
                        setTimeout(() => { first.classList.remove('flipped'); card.classList.remove('flipped'); first = null; lock = false; }, 800);
                    }
                }
            };
        }

        // --- GAME 2: 2048 PLATINUM ---
        let b2048, sc2048;
        function init2048() {
            b2048 = Array(4).fill(0).map(()=>Array(4).fill(0)); sc2048 = 0;
            add2048(); add2048(); render2048();
        }
        function add2048() {
            let e=[]; for(let r=0;r<4;r++)for(let c=0;c<4;c++)if(b2048[r][c]===0)e.push({r,c});
            if(e.length){ let{r,c}=e[Math.floor(Math.random()*e.length)]; b2048[r][c]=Math.random()<0.9?2:4; }
        }
        function render2048() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8 items-center bg-slate-900 p-4 rounded-3xl border border-slate-800"><button onclick="showView('home')" class="text-slate-500"><i class="fas fa-times"></i></button><p class="text-sm font-black text-blue-500">SCORE: ${sc2048}</p></div><div class="grid-2048" id="g-2048">${b2048.flat().map(v => `<div class="tile-2048 ${v?'tile-'+v:''}"> ${v||''} </div>`).join('')}</div></div>`;
            setup2048();
        }
        function setup2048() {
            let sX, sY; const g = document.getElementById('g-2048');
            g.addEventListener('touchstart', e => { sX = e.touches[0].clientX; sY = e.touches[0].clientY; e.preventDefault(); }, {passive: false});
            g.addEventListener('touchend', e => {
                let dX = e.changedTouches[0].clientX - sX, dY = e.changedTouches[0].clientY - sY;
                let old = JSON.stringify(b2048);
                if(Math.abs(dX)>Math.abs(dY)) { if(dX>30) move2048('R'); else if(dX<-30) move2048('L'); }
                else { if(dY>30) move2048('D'); else if(dY<-30) move2048('U'); }
                if(old !== JSON.stringify(b2048)) { add2048(); if(sc2048>highScores['2048']){ highScores['2048']=sc2048; localStorage.setItem('orbit_mega_scores', JSON.stringify(highScores)); } render2048(); }
            }, {passive: false});
        }
        function move2048(dir) {
            const slide = (row) => {
                let r = row.filter(v=>v);
                for(let i=0;i<r.length-1;i++) if(r[i]===r[i+1]){r[i]*=2; sc2048+=r[i]; r.splice(i+1,1);}
                return r.concat(Array(4-r.length).fill(0));
            };
            if(dir==='L') b2048 = b2048.map(r=>slide(r));
            if(dir==='R') b2048 = b2048.map(r=>slide(r.reverse()).reverse());
            if(dir==='U') { b2048=t(b2048); b2048=b2048.map(r=>slide(r)); b2048=t(b2048); }
            if(dir==='D') { b2048=t(b2048); b2048=b2048.map(r=>slide(r.reverse()).reverse()); b2048=t(b2048); }
        }
        function t(b){ return b[0].map((_,i)=>b.map(r=>r[i])); }

        // --- GAME 3: MATH DUEL SPEED ---
        function initMath() {
            let score=0, timer=30, q;
            const gen = () => {
                let a=Math.floor(Math.random()*20), b=Math.floor(Math.random()*20), op=Math.random()>0.5?'+':'-';
                q = { txt: `${a} ${op} ${b}`, ans: op==='+'?a+b:a-b };
                let options = [q.ans, q.ans+2, q.ans-2, q.ans+5].sort(()=>Math.random()-0.5);
                document.getElementById('m-q').innerText = q.txt;
                document.getElementById('m-opts').innerHTML = options.map(o => `<button onclick="checkMath(${o})" class="bg-slate-900 p-5 rounded-2xl border border-slate-800 font-bold text-white active:bg-blue-600">${o}</button>`).join('');
            };
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><div class="flex gap-4"><p class="text-blue-500 font-black" id="math-timer">30s</p><p class="text-white font-black" id="math-sc">0</p></div></div><div class="bg-slate-900 w-full p-10 rounded-[3rem] text-center border border-slate-800 mb-8"><h2 id="m-q" class="text-4xl font-black text-white"></h2></div><div class="grid grid-cols-2 gap-4 w-full" id="m-opts"></div></div>`;
            gen();
            const interval = setInterval(() => {
                if(!isGameActive) { clearInterval(interval); return; }
                timer--; document.getElementById('math-timer').innerText = timer+'s';
                if(timer<=0) { clearInterval(interval); victory(score, "Calculation Master!"); }
            }, 1000);
            window.checkMath = (ans) => {
                if(ans === q.ans) { score+=10; document.getElementById('math-sc').innerText = score; gen(); }
                else { timer -= 5; gen(); }
            };
        }

        // --- GAME 4: WHACK-A-MOLE PRO ---
        function initMole() {
            let score=0, activeHole=-1;
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="mole-sc">0</p></div><div class="mole-grid">${[0,1,2,3,4,5,6,7,8].map(i=>`<div class="hole" onclick="whack(${i})"><div class="mole" id="mole-${i}">üêπ</div></div>`).join('')}</div></div>`;
            const loop = setInterval(() => {
                if(!isGameActive) { clearInterval(loop); return; }
                document.querySelectorAll('.mole').forEach(m=>m.classList.remove('up'));
                activeHole = Math.floor(Math.random()*9);
                const isBomb = Math.random()>0.8;
                const m = document.getElementById(`mole-${activeHole}`);
                m.innerText = isBomb ? 'üí£' : 'üêπ';
                m.classList.add('up');
            }, 800);
            window.whack = (i) => {
                if(i !== activeHole) return;
                const m = document.getElementById(`mole-${i}`);
                if(m.innerText === 'üí£') { clearInterval(loop); victory(score, "TNT Exploded!"); }
                else if(m.classList.contains('up')) { score+=10; document.getElementById('mole-sc').innerText=score; m.classList.remove('up'); }
            };
        }

        // --- GAME 5: COLOR REFLEX ---
        function initColor() {
            let score=0, timer=20, cur;
            const colors = [
                {name:'RED', val:'#ef4444'}, {name:'BLUE', val:'#3b82f6'}, 
                {name:'GREEN', val:'#22c55e'}, {name:'YELLOW', val:'#eab308'}
            ];
            const gen = () => {
                const name = colors[Math.floor(Math.random()*4)];
                const visual = colors[Math.floor(Math.random()*4)];
                cur = { name: name.name, visual: visual.val };
                const display = document.getElementById('c-display');
                display.innerText = cur.name;
                display.style.color = cur.visual;
            };
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-blue-500 font-black" id="c-timer">20s</p></div><div class="bg-slate-900 w-full p-16 rounded-[3rem] text-center border border-slate-800 mb-10"><h2 id="c-display" class="text-5xl font-black"></h2><p class="text-[10px] uppercase font-bold text-slate-500 mt-4 tracking-widest">Match Name, Not Color</p></div><div class="grid grid-cols-2 gap-4 w-full">${colors.map(c=>`<button onclick="checkColor('${c.name}')" class="p-6 rounded-2xl font-black text-white" style="background:${c.val}">${c.name}</button>`).join('')}</div></div>`;
            gen();
            const interval = setInterval(() => {
                if(!isGameActive) { clearInterval(interval); return; }
                timer--; document.getElementById('c-timer').innerText = timer+'s';
                if(timer<=0) { clearInterval(interval); victory(score, "Mind Refined!"); }
            }, 1000);
            window.checkColor = (name) => {
                if(name === cur.name) { score+=10; gen(); }
                else { timer-=3; gen(); }
            };
        }

        // --- GAME 6: NEON SNAKE ---
        function initSnake() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="s-score">0</p></div><canvas id="s-canvas" width="300" height="300" class="bg-slate-950 border border-slate-800"></canvas><div class="mt-8 grid grid-cols-3 gap-3"><button onclick="sDir('up')" class="col-start-2 w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-up"></i></button><button onclick="sDir('left')" class="col-start-1 row-start-2 w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-left"></i></button><button onclick="sDir('down')" class="col-start-2 row-start-2 w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-down"></i></button><button onclick="sDir('right')" class="col-start-3 row-start-2 w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center text-white"><i class="fas fa-chevron-right"></i></button></div></div>`;
            const ctx = document.getElementById('s-canvas').getContext('2d');
            let s=[{x:10,y:10}], dx=1, dy=0, f={x:15,y:15}, sc=0;
            const loop = setInterval(() => {
                if(!isGameActive) { clearInterval(loop); return; }
                let h={x:s[0].x+dx,y:s[0].y+dy};
                if(h.x<0||h.x>=30||h.y<0||h.y>=30||s.some(seg=>seg.x===h.x&&seg.y===h.y)){ clearInterval(loop); victory(sc, "Snake crashed!"); return; }
                s.unshift(h);
                if(h.x===f.x && h.y===f.y){ sc+=10; document.getElementById('s-score').innerText=sc; f={x:Math.floor(Math.random()*30),y:Math.floor(Math.random()*30)}; } else s.pop();
                ctx.clearRect(0,0,300,300); ctx.fillStyle="#3b82f6"; s.forEach(p=>ctx.fillRect(p.x*10,p.y*10,9,9)); ctx.fillStyle="#f43f5e"; ctx.fillRect(f.x*10,f.y*10,9,9);
            }, 100);
            window.sDir=(d)=>{if(d==='up'&&dy===0){dx=0;dy=-1}if(d==='down'&&dy===0){dx=0;dy=1}if(d==='left'&&dx===0){dx=-1;dy=0}if(d==='right'&&dx===0){dx=1;dy=0}};
        }

        // --- GAME 7: GEMS CATCH ---
        function initCatch() {
            const container = document.getElementById('view-container');
            container.innerHTML = `<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-8"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><p class="text-2xl font-black text-blue-500" id="c-score">0</p></div><canvas id="c-canvas" width="320" height="420"></canvas></div>`;
            const canvas = document.getElementById('c-canvas'), ctx = canvas.getContext('2d');
            let p={x:130,w:60}, its=[], sc=0;
            const loop = () => {
                if(!isGameActive) return;
                ctx.clearRect(0,0,320,420);
                if(Math.random()<0.04) its.push({x:Math.random()*300,y:0,t:Math.random()>0.2?'üíé':'üí£'});
                its.forEach((it,i)=>{
                    it.y+=4; ctx.font='24px serif'; ctx.fillText(it.t, it.x, it.y);
                    if(it.y>390 && it.x>p.x-10 && it.x<p.x+p.w+10){
                        if(it.t==='üí£'){ isGameActive=false; victory(sc, "BOOM!"); return; }
                        sc+=10; document.getElementById('c-score').innerText=sc; its.splice(i,1);
                    }
                    if(it.y>420) its.splice(i,1);
                });
                ctx.fillStyle='#3b82f6'; ctx.beginPath(); ctx.roundRect(p.x,400,p.w,10,5); ctx.fill();
                requestAnimationFrame(loop);
            };
            canvas.ontouchmove=(e)=>{p.x=e.touches[0].clientX-canvas.getBoundingClientRect().left-30;e.preventDefault();};
            loop();
        }

        // --- GAME 8: TIC TAC TOE ---
        function initTTT() {
            let b=Array(9).fill(null), t='X', container = document.getElementById('view-container');
            container.innerHTML=`<div class="view-anim flex flex-col items-center"><div class="w-full flex justify-between mb-10"><button onclick="showView('home')" class="text-slate-400"><i class="fas fa-times"></i></button><p id="t-status" class="font-black text-white uppercase text-xs">Turn: ${t}</p></div><div class="grid grid-cols-3 gap-4 w-full max-w-[320px]">${[0,1,2,3,4,5,6,7,8].map(i=>`<div onclick="tClick(${i},this)" class="bg-slate-900 aspect-square rounded-[2rem] border border-slate-800 flex items-center justify-center text-4xl font-black text-white"></div>`).join('')}</div></div>`;
            window.tClick=(i,el)=>{
                if(b[i] || !isGameActive) return; b[i]=t; el.innerText=t; el.style.color=t==='X'?'#3b82f6':'#f43f5e';
                let wins=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
                if(wins.some(([a,bc,c])=>b[a]&&b[a]===b[bc]&&b[a]===b[c])) { isGameActive=false; victory(0, t+" Wins!"); return; }
                if(b.every(v=>v)) { isGameActive=false; victory(0, "Draw Game!"); return; }
                t=t==='X'?'O':'X'; document.getElementById('t-status').innerText = `Turn: ${t}`;
            };
        }

        // --- SYSTEM SHARED ---
        function victory(s, msg) {
            if(!isGameActive && document.getElementById('win-overlay').style.display === 'flex') return;
            isGameActive = false;
            document.getElementById('win-msg').innerText = msg + (s>0 ? " Score: "+s : "");
            document.getElementById('win-overlay').style.display = 'flex';
            document.getElementById('win-restart-btn').onclick = () => { closeWin(); startGame(activeKey); };
        }
        function closeWin() { document.getElementById('win-overlay').style.display = 'none'; showView('home'); }
        function handleSearch(q) { renderHome(GAMES_DB.filter(a => a.name.toLowerCase().includes(q.toLowerCase()))); }
        function renderGames() { renderHome(); }

        function renderProfile() {
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-6">
                    <div class="bg-blue-600 rounded-[3.5rem] p-10 text-white shadow-2xl flex flex-col items-center">
                        <div class="w-24 h-24 rounded-full border-4 border-white/20 mb-4 overflow-hidden bg-white/10">
                            <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="w-full h-full">
                        </div>
                        <h2 class="text-2xl font-black">Platinum Ninja</h2>
                        <p class="text-[9px] font-black uppercase tracking-widest opacity-60">Global Rank #01</p>
                    </div>
                    <div class="bg-slate-900 rounded-[2.5rem] border border-slate-800 overflow-hidden">
                        <button onclick="showView('feedback')" class="w-full p-6 flex items-center justify-between hover:bg-slate-800 transition-colors">
                            <div class="flex items-center gap-4 text-white">
                                <i class="fas fa-comment-dots text-blue-500"></i>
                                <span class="font-bold text-sm">Submit Feedback</span>
                            </div>
                            <i class="fas fa-chevron-right text-slate-500 text-xs"></i>
                        </button>
                    </div>
                </div>`;
        }

        function renderFeedback() {
            const container = document.getElementById('view-container');
            container.innerHTML = `
                <div class="view-anim space-y-8">
                    <button onclick="showView('profile')" class="w-10 h-10 rounded-full bg-slate-900 flex items-center justify-center text-slate-500 shadow-lg"><i class="fas fa-arrow-left"></i></button>
                    <div>
                        <h2 class="text-3xl font-black text-white">Aapka Feedback</h2>
                        <p class="text-slate-500 text-sm mt-2">AppOrbit ko hum kaise behtar banayein?</p>
                    </div>
                    <div class="space-y-4">
                        <textarea id="f-msg" placeholder="Message yahan likhien..." class="w-full bg-slate-900 border border-slate-800 rounded-3xl p-6 min-h-[150px] outline-none text-white font-bold text-sm"></textarea>
                        <button onclick="submitFeedback()" class="w-full bg-blue-600 text-white font-black py-5 rounded-3xl shadow-xl active:scale-95 transition-all uppercase tracking-widest">SEND MESSAGE</button>
                    </div>
                </div>`;
        }

        function submitFeedback() {
            const m = document.getElementById('f-msg').value;
            if(!m) return toast("Message blank hai!");
            feedbacks.push({ msg: m, date: new Date().toISOString() });
            localStorage.setItem('orbit_mega_feedback', JSON.stringify(feedbacks));
            toast("Shukriya! Feedback mil gaya.");
            setTimeout(() => showView('profile'), 1500);
        }

        function toast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.style.display = 'block';
            setTimeout(() => t.style.display = 'none', 3000);
        }
    </script>
</body>
</html>



